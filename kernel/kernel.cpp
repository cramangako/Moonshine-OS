// kernel entry point - sets up the screen and runs the input loop

#include "limine.h"
#include "../drivers/console.h"
#include "../drivers/keyboard.h"
#include <stdint.h>

/*

epic miss edwards jumpscare


%%%%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%@%@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%@@%%%%%%%%@%@@@@@@@@@
%%%%%%@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%####%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%@@@@%%%%%%%%%%%%%%@@%%%%%%%@%%%%%%%%%%@@@@@@@@@@%%%%%%%%@@@@@%%%@@@@%@%%%%%%@@@@@@@@@@@@
%%%@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%#%%@%%%%%%%%%%%%%%%%%%@@%%@%%@%%%%%%%%%%%%%%%@@@%%%%%%%%%%%%%%@@%%%@@@@@@@@@@@@@@@@@@@@@@@@
%%%@@@@@@%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%###%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@%%%%%%%%%%%%%%%%%%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%@@@@@@@@@@@@@@@@@@@@@@@@
%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%####%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%@@@@@@@@@@@@@@@@@@@@@@@@
%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#######%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@%%%@@@@@@@@@@@@@@@@@@@@@@@@
@%%%%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@
%%%@%%%@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%%@@@@%@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+::=#%%%%%%%%%%%%%%%%%%@%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
%%%%%%@@@@@@@@@@@@%@@@@@@%%%@@@@@@%%%%%%@@@@@%@@@@@@%%%@@@%%@@@%%@@@@%@@@@@%%@@@@@@%%%@@@@@@@%%%%@@@@@%%%%%%%%%%%##%%%*::::::+%%%%%%%%#=##+==+#%%@@%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%@@@@@@@@@@@@@@@@@@@@
%%%%%@@::::+@::::+@::::::-@@::::::=@%%@=:::::%-::::::+@:::*@::::@:::*@:::::@@=::::::*@=::::::-@@::::::=@%%%%%%#%#%%%%%-:---+::%%%%%%#-:::::::::::%@@%%@@@@@@@@@@%%%%%%%%%%%%%%%%%@@@%@@@@@@@@@@@@@@@@@@
%%%%%@@::::-*:::.+@..:@:::++:::@:::%%%@=:::==@-:::#:::#:::++:::.@:::#%:::::+@=:::%:::@=:::@:::+*:::@:::@@%%%%%%%%%%%%%#::++:-%%%%%-::::=%%%%%%#@%:%@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@
%%%%%@@:::::-:::.+@:.:@-::+*:::+@%%%%%@=:::@@@-:::%...*-::=-::..#:::@-::+::-@=:::@:::@+:::@:::=*:::*@@%@%%%%%%%%%%%%%*#%#**#%%%%::::*--%%%%%%%*@#:=@@@@@@@@@@@@@%%%%%%%%%%%@%%%%%%%%@@@@@@@@%@@@@@@@@@@
%%%%%@@:::::::-:.+@:.::::=@@=:::::%@%%@=:::::@-:::%...**:.-::::.*:::@:::%:::@=::::::*@+:::@:::-@=:::::%@%%%%%%%%%%+:::::::::::+:::*:::%%%%%%%#*%::*@@@@@@@@@@@@%%%%%%%%%%%%%%%%@@%%%%%%@@@@@@@@@@@@@@@@
%%%%%@@:::-:::=..+@..:@:.:+@@@@::::%@%@=:::@@@-:::%:.:*@.::::+::-:::@:::@:::%=.::@:::@+:::@:::-@@@@::::#%%%%%%%%%-:::::::::::+::*---=%%%#%#%=%+::=@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%@@@@@@@@@@@%@@@@@@@@@@@
%%%%%@@:::*::-=::+@:::@-::=*:::@:::#@%@=:::@@@-:::%:::*@:::::@:::::+#:::::::*+:::@:::@+:::@:::=#:::@:::*@%%%%%%%-::+::::::::=::*%%%%%%%%%#=#+:::*@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%@@@@@@@@@@@%%@@@@@@@@@@@
%%%%%@@:::@::+=::+@:.:@-.:=@:::::::%@%@=:::::%-:::::::%@::..:@=:...@+:::@::::+:::@:::@=:::::::*@:::::::%@%%%%%%*::+:::::::::=--%##%%%#*-*#::::=%%%%@@@@@@@@@@@%%%%%%%%%%%%%%%%@@@@@@@@@@@%%%%%@@@@@@@@@
%%%%%%@###@##%%##%@###@###%@@%=-+%@%%%@%#####@%#####%@@@%####@%####@####@%###%###@###@%#####%@@@@%=-+%@%%%%%%%%-::+-:::::+++:::-+###*=:::::-#%%%%%%%@@@@@@@@@@%%#%%%%%%%%@@%%%@@@@@@@@@@@%%@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%%@@@%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%+::::++=::::=%%*:::::::-+#%%%%%%%%%@@@@@@@@@%%%%#%%%%%%%%@%%%%@@@@@@@@@@@%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%#####%%##%%%%%%%%%%%%%%%%%%%@@@%%@@@%%@%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%*::::+::+%%%%%%%%%####%%%%%###%%%%#*#@@%%%%%###%%%%%%%@@@%%%@@@@@@@@@@@@@@@%%%@@@@@@@
%%%%%%%%%%%%%#%%%%%%#%###%%%%%%%%%%%#%%##%%%%%%%%%%@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%#%#%#%%%%%%%%%%%%%%%%%%%%%%%%#=::=:::=::%#-:::--=::-::-%%::::%%-::-::+=:-*::*#%%%%%%@@@@%%%@@@@@@@@@@@@@@@@@@@%@@@@@
%%#%%#%%%##%%#%%%%%%%#%%%##%%##%#%%#%%%%%%%%%%%%%%@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%##%##%%%%%%%%%%%%%%%%%%%%%%::::::#+#-:::%%@+:-@@::#@=:-%::=::@*::%%=-+::::-%%%%%%%%@@@@%%%%@@@@@@@@@@@@@@@@@@@@%@@@@
%%%%%#%#%%%%%%%%%%%%%%%#%%#%%##%%#%%%%%%%%%%%%%%%%%%%@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%####%%%%%%%%%%%%%%%%%%%%%%::-#-:::#::.:%@@-:+@%:::::-@*::%::%-:=%%%%%:::::%%%%%%@@@@@@%%%%@@@@@@@@@@@@@@@@@@@@%%%@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@%%%%%%%@@%%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%%%%%%::::#::::%@%::%@#::@::#@::::::*-:-%*::*::%-:=%%%%%%%@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@%%@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%@%%%%%%%%%%%%%%%@@%@::::%::::%@%::@@+:-@+:--:-@@-:=@=:::-%+:-@#::%%%%%%%%@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@%%%%%%%%%@@%%%@@@@::::%::::%@@@@+::-@@-:+=::::-@@@:::%@@*::::+%%%%%%%%@%%@%#%@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@%%%%%%@@@@@@@%%%%%%@@@@@@@@@::::%::::%@@@#::::@@::#::#@-:-@-:::+@+::@%::#@%%%%%%%@@@%#%%@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@%%@@@@@@@@@@::::%::::%@@@::%::%@::%::==::%*:-+:-@::#@@@@@@@@%@%%@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@::::%::::%@@+:::::*+::*::=+#@@::::::%::%@%**@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@::::@::::%@#::%@-:=-:==:=%@@@::=@%::%-:::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%@@@@@@@%@%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###*##************************************************#****#***##%@@@%%#@%#*####**#*#%%%%%%%%%%@@@@@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###*##*******#*********************#******************#****#%@@@%%%@@@#%@@%+###***#*#%%%%%%%%%%%@@@@@@%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
###**#************************************************##@@@%%%%@@%@%@#%#%%@@+##***#*#@@%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#######*************************************+******%@@@#%%@@#@@%@%@%%%@%###*###***#*#@@@@%%%%%%%@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#######***************************************%@@@%#%@@@@%%@#%%%%@@%#*******###*****#@@@@@@@@%@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#######**********************************#@@@%#%%%@@#%@#%@#%@@%##**#**##*#*####****#@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
######******************************#%@@@%%%%@@@#%@%%%%%@@##****##*#***#****###*****%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#######*************************%%@@%#%%@%%@@@%%%#%@@###***###**##***********##*****#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#######********************#%%@%##%%@%@@#%@#%%@@@***#******#*#**##**********###******@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*#**##****************#%#@%####@%%%#@#%##%@@#+******#********#####*****#****####*****@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*#***#***********%%%%%##%@%@%##%%####@@%+****###%@@@@@@@#***#######****#****#*##*****@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*****#***##*#@%%%%#%%@%@@@@#%###%@@*+******@@@@@@@@@@@@@@@%+######*****#****#*##*****@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*******%@%#%%%%@@@@%#@@%%###%@#****+****@@@@@@@@@@@@@@@@@@@@+######****#***##*##*****@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
**#@@%%%%%@%#@%@#%%%###%%%++*******+**@@@@@@@@@@@@@@@@@@@@@@%+#####****#***##*##*****@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@%%%%@@%#%@@%%@#%%#%%*+*************#@@@@#%@@@@@@@@@@@@@@@@@@%+####********##*##****#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@%%%%%%%##*+*********+********@@@#*####%%@@@@@@@@@@@@@@@%*###***##*#*#####*#*##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%@%%@%%%%##*+*********+*********#***@@@+***####%%@@@@@@@@@@@@@@+##########*#####*#*##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%%@@%#********+************+*******#@@#+***#####%%%@@@@@@@@@@@@+#########**#####***##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
%****#********+*********************@@@%***##%@@@%%%@@@@@@@@@@@+##########*######**##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
**##****************+*+**************@%@@%+%%%@@%%@%%%@@@@@@@@@+#################*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
**********************+**********#***#@+%%+%%%#%%%%%%%@@@@@@@@###################*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
**********************+**********#***#*##*#%#######%%%@@@@@@@@*%#################**##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-::::=@@-------+@@#-----@@@@=--=@@@@@@@+--@@@@@@@%=::*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
****************####*#%%+********#********%#%#**##%%%%%%%@@@@%#%#################*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@=:::=::::@:::::::+@@::::.:@@::.:::::%@#-:::.@@@@@-::::::::@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*************+*%**##%%%+*******#*#**###@@@@@@@@@#%%%%%%@@@@@#%%%%################*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@::::@+:::=@@@#:::+@+::::.:@#:::#@::::-::::::@@@@%::::@::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@
*********#***#***%#*##+***********#%%#%@%@%@@@@@@@#%%%%@@@%%%%%%%%###################@@@@@@@@@@@@@@@@@@@@@@@@@@@@::::*::-@@@@@::::@@::+::.:@%###%-:::=@@@::..@@@@@:::::#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
***********++******++*********##+####%@@*#%%###%%@%%%%%%%%%%%%%%%%#####****##########@@@@@@@@@@@@@@@@@@@@@@@@@@@@:::::::::*@@@::::@:::@::::@@@@@=::::@@@@:::.@@@@@@:::::::%@@@@@@@@@@@@@@@@@@@@@@@@@@@@
**********++*+++**+*%*******#@=*%%%*#%@@@+####%%%%%%%%%%%%%%%%%%%%%####****##*###*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@::::@+:::=@@=:::%#::-@::::@@@@-::::@@@@@.::.@@@@@@@@+:::::*@@@@@@@@@@@@@@@@@@@@@@@@@@@
***************++*#%%+**#%#%#*%%@@%+%@#%@@*#%%%%%%%%%%%%@%%%%%%%%%%####*#@**+*%%#*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@::::@+:::=@@::::@-...::::::@@-:::+@@@@@@.::.@@@@%:..:@::::-@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@#%*********+***#*#%++@@@@*#%@@@@=#%@*@@@@=@%%%%%%%%@@@@=@@#%%%%%%##%###*+##**%%*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@:.::@+:::+@#:::-@-...:::::.@.:.:%@@@@@@@.::.@@@@@:..:@::::+@@@@@@@@@@@@@@@@@@@@@@@@@@@
**@%+**************#%#@#@%@@@#@@@=#@@#*@@%@==%@%%%%%@%++*#@@%%%%%%%#+++**#+*##*%%*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:::::::=@@-:::#@@@@@@::::@#::....::+@@@::::@@@@@@:::::::*@@@@@@@@@@@@@@@@@@@@@@@@@@@@
***************#####%@%@@@@@*@@@=%@@%+@@@@%+===%%#*==+***#@@@@%%%%%%###*=*##*########@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*+**********#@#######%@@@@@%@@@@@%@@*@@@@@@*=@@%#**=++++%%%@@@@@%@@###%##=++*##%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
***********%@@@#**#%@@@%@@#@@@@@*@@@@@@@%@@@#@@@@@@@==%@@@@@@%@@@@@@@%=+++*#%@%%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*******++*%@@@@####%@@@@@%@@%@@%@@@%@@%@@%@@+*@@@@@*#%%@@@@@%@@@@%@@#@=+*#%@@@*######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*******++%@%@@@%#@@@@@@@%@@%@@@%@@@#@@@%@@%@*=@@@@##=#@@@#@@@@@@@%@@@#@*%@@@@@@@+####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*+****++*@%@@#@@@@%@@%@@#@@@@@#@@%@@#@@@@@@#@@@@@@+##@%%@@@#@@@@@@@@@#@*@@@%@@@@@+###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*******+%%@%@#@@%@@%@@@%@@@@@#@@#@@@@%@@%@@@@@@@@@*%%@@@@#@@@@@@@@%@@@@#@@@%@@@%%*###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
********@%@%@#@@%@@#@@@@@@%@%@@#@@@%@%@@@#@@@@@@@@*@@@@#@@@@#@@%@@%@%@@#@@#@@@#@#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
******+%%@*@@#@@%@@@@@@@@%@%@@%@@@#@@@#@@@*@@@@@@@@@@*@@@@#@@@%*@@@@%@%@@@#@@@#@**###@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
******+%@#@@@%@@#@@@@@@@%@@@@@%@@#@@%@@#@@@%@@@@@@@#@@@@#@@@@%@%@@@*@@%@@@@@@@%@+####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*******@@%%%@%@@*@@@@@@@@@@@@*@@%@@@@@@@%@@%@@@@@*@@@@#@@@@@#@@@%@%@@@#@@*@@@#@*#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+******@@%#@@@@@*@@@@@@@@@@@@%@@#@@#@@@%%@@@%@@#@@@@#@@@@@@@%@@@#@#@@%@@@%@@@%@+#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+******@%@%@%@@@*@@@%@@@@@@@#@@#@@#@@@*@@#@@@@%@@@%@@@@@@*@@@@@@%@%@@#@@%@@@*@#######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+******@@@@%%@@@#@@@@@@%@@@@*@@#@@#@@#@@@@*@@@@@@#@@@@@@@#@@@@@@%@@@#@@@#@@@%@*######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+*++***@@@*@#@@@#@@@@@@@@@@@@@%@@#@@@%@@@@@@@@@#@@@@@@#@@#@@@%@@@*@@%@@@@@@@@@*##%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+*++**%%@@@@#@@@%@@@@@@@@@@#@@+@@#@@%@@@*@@@@*@@@@#@@@#@@#@@@%@@%@@%@@@*@@@#@@*@%@@@%@@@@@@@@@@@@@@@@@@@@@@@@@=@*%:@@##@@#@=@@*@+@@=@*@@+@@%#@@:@@*@@:%*@@+@-*@%-@@@@=@#%@%#=@@@@@@@@@@@@@@@@@@@@@@@@@@
***+**#@@#@@#@@@@@@@@@@@@@@%@@@@@@@@#@@@@@@#@@@@@@#@@@#@@#@@@%@@#@@*@@@%@@@#@@%%@@@%%@@@@@@@@@@@@@@@@@@@@@@@@@-##@:@@#%@@#@=@@*@@-+@@*@@+@@%#@@:@@*%-@##@@+@=%#++@@@@=@#%@%#=@@@@@@@@@@@@@@@@@@@@@@@@@@
*+*+***@@%@@*@@%@@#@@@%%@@%@@#@@*@@@%@@#@%@@@@@@@@#@@@%@@#@@@@@@%@@@@@#@@@%@@@@@@%@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*++*****@@@@%@@%@@#@%@@%@@#@@#@@#@@#@@@%@@@%@@@@@@#@@@%@@#@@@@@#@@#@@@#@@@#@@@%@%@@##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+++@@%@@@%@@@@+@@%%@#@@%@%@@@#@@%@@@@*@@@@@@#@@@@@@#@@@@@#@@#@@@%@@@%@@@@*#%%%#@@@@@@@@@@@@@@@@@@@@@@@@@-#-@-#=@#+#=@@@@@=@-#-@-#-@@+-@@=#%+@@@@=@@#+#=@#**=@=#-@=@+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+***#%@@@@@@=+@@%@%@%@#@@#@@@%@@#@@@@*@@%@@@#@@@@@@*@@%@@@@@@@@%@@@#@@@@@@*%###@@@@@@@@@@@@@@@@@@@@@@@@@:==@:==@=@@@=*==@=@%=+@:==@@*%#@--%+@@@@=@@-@@@-#==*@-=+@@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+*++*******++*@@#@@%@@*@@#@@%@@@%@@@@#@@%@@@#@@@@@@#@@%@@#@*@@@+@@@%@@@@@@+####@@@@@@@@@@@@@@@@@@@@@@@@@=@@@-@=@%=+=@@@@@=@=+=@-@=@-@@=@-+#++*@@=+#%=+=@#+++@=+=@@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+*++**********@@@%@%@@#@@%@@#@@%@#@@@%@@#@@@%@@%@@@%@@@*@@@#@@@@@@%@@@@%@%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+*++++********@%@#%%@%@@%@@@@@@#@#@@%@@@*@@@@@@*@@%@@@@@@%@%@@#@@@#@%@@@@+#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+*+++++******#@@@%#%@%@@*@@%@@@%@%@@#@@@#@@%@@@#@@#@@#@@%%@@@@*@@@#@%@@%*######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++**+*+++++******@%@*@#%@#@@#@@#@@%@%@@@*@@@%@@#@@@@@@%@@%@@#@@#@@#@@@@@@@@*#######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++*+++++++++***+@#%@@%@#@*@%@@@%@@#@%@@@#@@@@@@*@@%@@@@@@@@@#%%@@@#@@@@@@*%#%%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
++++*++++++++++**%@@%%@@*@@#@*@@%@@@%@*@@@%@@#@@@#@@#@@*@@#@@@%%%%%%%%%####%%%%######@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**++++++++**+#@%#@%@@@@#@%%@@*@@#@@#@@%@@@*@@%@@@#@@%@@@@%@@#%%%%%%%%###%%%%%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**++++++++*+*@%@@@%@#@#@@%@@%@@@#@@@@@#@@@%@@#@@@@@%@@#@@@@@#%%%%%%%%##%%%%%%#####@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**++++++++**@%@%@*@*@@%@#@@@#@@@%@@@@@%@@%@@@#@@%@@#@@@@@@@@#%%%%%%%%%%%%%%%%%###%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**+++++++++*@@@*@@%%@#@*@@@@@@@*@@@@@@%@@#@@@@@#@@*@@%@@@@@%#%%%%%%%%%%%%%%%%%##%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**+++++++++@#@#@@*@@@@#@@@@*@@@@@@%@@@%@@#@@@@@#@@*@@%@@%@@%%#%%%%%%%%%%%%%%%%%%%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
+++**++++++++%*@@%@%@@#@@#@@@@@@@#@@@@@@@#@@#@@%@@#@@#@@%@@%@@@%#%%%%%%%%%%%%%%%%%%#%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*++*++++++++*%@@*@@*@@*@*@%@@*@@@%@@@@@@@#@@%@@@@@#@@#@@%@@*@@@%#%%%%%%%%%%%%%%%%#%#%@@@@@@@@@@@@@@@@@@@@@@@@%@*#*-@=#*%*@@*****#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*@%@@+@%%#@@*%*@@@@@@@@@@@@@@@@@@@@@
*++*++++++++@%@%@@%@@%@%@@*@@%@@#@@@@@@@@#@@%@@@@@#@@#@@%@@#@@@*%%%%%%%%%%%%%%%%%%##%@@@@@@@@@@@@@@@@@@@@@@@@@#@@#%@*%#@#%*%@#@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#@@@*###%@@#%%#@@@@@@@@@@@@@@@@@@@@@
**+*+++++++%#@@%@@#@@#@%@#@@%@@@%@@@@%@@@*@@#@@@%@#@@@@@@%@@%@%#%%%%%%%%%%%%%%%%####%@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
****++++++#%@@%@@%@@+@@#@#@@*@@%@@@@@%@@@*@@%@@@#@@*@@#@@#@@%@@%%%%%%%%%%%%%%%@%#*##%@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+@@@%=++++@@@*@@*@@*@@*@@#@%@@@#@@%@@@@@@*@@@@@@#@@#@@#@@*@@%@@%#%%%%%%%%%%%%@@@%**##@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+**+++++++@@@%@%@@@#@#@@+@@#@@@@@@*@@@%@@*@@@@@@*@@#@@%@@#@@#@@%#%%%%%%%%%%%%%@#%%=##@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%###%%#%#%###%%#%%%##%%#%##%##%#%%%##%#%%%%####%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
++*++++++++%#@@#@@*@@*@#@@%%@@#@@%%@@@%@@*@@@@@@*@@%@@%@@#@@#@@#%%%%%%%%%%%%%%%%@*%+*@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%=+###-*+:*+:*:*+::%-=+:+:-=#*::#-=:==:#::+*:*:=%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
++*++++++++++@%@@%@@@%@%@@*@@@%@@*@@@@#@@#@@@@@@#@@#@@%@@%@@%@@#%%%%%%%%%%%%%%%%#**@+@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%#+*-*:*=#+:%-::=#:+:#:%##-::*#:=:*:*::-*---=:=%#%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
++*++++++++++@%@@#@@#@@#@%%@@#@@@#@@@@*@@#@@@@@@#@@%@@%@@%@@#@@#%%%%%%%%%%%%%%%%*****@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%*++==+#%-=#-*---=%:*-::*:++:--#:=:+:#%+:#=-*::-%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+++++++++++++@*@%@#%@@+@@#@@@#@@%@@@@@*@@#@@@%@@#@@%@@%@@#@@#@@%%%%%%%%%%%%%%%%%*****@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%#+==*%%%%%%%%%%%%%#%%%%%%%%%%%%%%##%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+++++++++++++@*@#@#@*@@@@*@@%%@@*@@@@@*@@%@@@%@@#@@%@@%@@%@@#@@#%%%%%%%%%%%#%%%%#+***@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%%%%%%%%%%%%#%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+++++++++++++%#@+@%@*@%@@@%@@%@@@@@@@@#@@%@@@%@@#@@#@@%@@%@@%@@#%%%%%%%%%%%#%%%%#****@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@
+++++++++++++#@@#@%@*@%@@@@@@#@%@@@@@@#@@@%@@*@@%@@@@@@@@@@@@@@##%%%%%%%%%%#%%%%#****@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@



*/

// limine scans the binary for these tagged sections before booting us
__attribute__((used, section(".limine_requests_start")))
static volatile uint64_t limine_requests_start_marker[] = LIMINE_REQUESTS_START_MARKER;

__attribute__((used, section(".limine_requests")))
static volatile uint64_t limine_base_revision[] = LIMINE_BASE_REVISION(4);

// limine writes the framebuffer pointer into .response (elite soundcloud ball knowledge) before jumping here
__attribute__((used, section(".limine_requests")))
static volatile limine_framebuffer_request framebuffer_request = {
    .id       = LIMINE_FRAMEBUFFER_REQUEST_ID,
    .revision = 0,
    .response = nullptr
};

__attribute__((used, section(".limine_requests_end")))
static volatile uint64_t limine_requests_end_marker[] = LIMINE_REQUESTS_END_MARKER;

static void fill_screen(limine_framebuffer* fb, uint32_t color) {
    for (uint64_t y = 0; y < fb->height; y++) {
        uint32_t* row = (uint32_t*)((uint8_t*)fb->address + y * fb->pitch);
        for (uint64_t x = 0; x < fb->width; x++)
            row[x] = color;
    }
}

// red_mask_shift etc. tell us where each channel sits in the pixel value
static uint32_t make_color(limine_framebuffer* fb, uint8_t r, uint8_t g, uint8_t b) {
    return ((uint32_t)r << fb->red_mask_shift)
         | ((uint32_t)g << fb->green_mask_shift)
         | ((uint32_t)b << fb->blue_mask_shift);
}

// not used yet in normal circumstances
[[noreturn]] static void halt() {
    asm volatile("cli");
    for (;;) asm volatile("hlt");
}

// needs to be extern "C" so the linker can find it by name without C++ mangling
extern "C" void kernel_main() {

    // before we start anything lets make sure framebuffer works

    if (LIMINE_BASE_REVISION_SUPPORTED(limine_base_revision) == false)
        halt();

    if (framebuffer_request.response == nullptr
     || framebuffer_request.response->framebuffer_count < 1)
        halt();

    limine_framebuffer* fb = framebuffer_request.response->framebuffers[0];

    uint32_t black = make_color(fb,   0,   0,   0);
    uint32_t white = make_color(fb, 255, 255, 255);
    uint32_t red = make_color(fb, 255, 0, 0);
    uint32_t green = make_color(fb, 0, 255, 0);
    uint32_t blue = make_color(fb, 0, 0, 255);

    console_init(fb, white, black); // framebuffer, text/foreground colour, background colour

    console_colour(fb, green, black);
    console_speak("Moonshine OS\n");
    console_speak("------------\n");
    console_colour(fb, blue, black);
    console_speak("Made with love by cramangako and Realyby\n");
    console_colour(fb, white, black);
    console_speak("use help to get list of commands\n");

    

    console_speak("> ");

    // keep polling the keyboard - getchar() returns 0 when nothing is pressed
    while (true) {
        char c = keyboard_getchar();
        if (c) {
            if (c == '\n') {
                console_speak("\n> ");
                check_commands();
                console_speak("\n> ");
            } else {
                console_putchar(c);
            }
        }
    }
}
